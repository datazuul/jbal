<?xml version="1.0"?>

<map:sitemap xmlns:map="http://apache.org/cocoon/sitemap/1.0">

<map:components>
  <map:generators default="file">
  </map:generators>
  <map:transformers default="xslt">
  </map:transformers>
</map:components>

<map:pipelines>
  <map:pipeline>
  
  	<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
  	
  	<!-- VISUALIZZA LA PAGINA DI UPLOAD -->
  	
  	<map:match pattern="pid*">
		<map:generate src="import.html"/>
		<map:transform src="addPid.xslt">
			<map:parameter name="pid" value="{1}"/>
		</map:transform>
		<map:serialize type="html"/>
	</map:match>
	
	<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
	
	<!-- UPLOADA IL FILE -->
	
	<map:match pattern="upload*">
		<map:act type="auth-protect">
			<map:parameter name="handler" value="demohandler"/>
			<map:match pattern="upload*">
				<map:generate type="upload-manager">
					<map:parameter name="UploadDirectory" value="images/contentimg/" />
				</map:generate>
				<!--map:redirect-to uri="../pageview?pid={1}"/-->
				<map:serialize type="xml"/>
			</map:match>
	    </map:act>        
	</map:match>
    
    <!--map:match pattern="upload">
    
    	<map:act type="auth-loggedIn">
        	<map:parameter name="handler" value="demohandler"/>
	        <map:act type="auth-protect">
		        <map:parameter name="handler" value="demohandler"/>
		        <map:transform src="stylesheets/xslt/addForm.xslt">
		        	<map:parameter name="role" value="{role}"/>
		        </map:transform>
		    </map:act>
		</map:act>
    	<map:act>
			<map:generate type="upload-manager">
				<map:parameter name="UploadDirectory" value="images/contentimg/" />
			</map:generate>
		<map:serialize type="xml" />
		</map:act>
		
    </map:match-->
    
    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
    
  </map:pipeline>
</map:pipelines>
</map:sitemap>
