<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE map:sitemap [
<!ENTITY generalComponentPipeline SYSTEM "../generalComponentPipeline.dat">
]>
<map:sitemap xmlns:map="http://apache.org/cocoon/sitemap/1.0">
	
	
	
	<map:pipelines>
		
		<map:pipeline internal-only="false"> 
	            
	            <map:match pattern="view">
	                <map:act type="request">
	                    <map:parameter name="parameters" value="true"/>
	                    <!-- http://www.biblio:8080/JOpac2/components/newslist/view?cid=5923&pid=1 -->
	                    <map:generate type="newsListGenerator">
	                    	<map:parameter name="db" value="{global:db}" />
	                    	<map:parameter name="datadir" value="{global:data-directory}" />
	                    </map:generate>
	                    
						<map:transform type="cinclude" />
						
						<!-- map:transform type="tutil" src="/t/newsbefore" / -->
						
	                    <map:transform src="newslist.xslt">
	                        <map:parameter name="use-request-parameters" value="true"/>
	                    </map:transform>
	                    
	                    <!-- map:transform type="tutil" src="/t/newsafter" / -->
	                    
	                    <map:transform type="wikitrans">
	                    	<map:parameter name="db" value="{global:db}" />
	                    </map:transform>
	                    <map:serialize type="xml"/>
	                </map:act>
	            </map:match>
	            
	            <map:match pattern="rss">
	                <map:act type="request">
	                    <map:parameter name="parameters" value="true"/>
	                    <map:generate type="newsListGenerator">
	                    	<map:parameter name="db" value="{global:db}" />
	                    	<map:parameter name="datadir" value="{global:data-directory}" />
	                    </map:generate>
	                    
						<map:transform type="cinclude" />
						
						<!-- map:transform type="tutil" src="/t/rssbefore" / -->
						
	                    <map:transform src="rsslist.xslt">
	                        <map:parameter name="use-request-parameters" value="true"/>
	                        <map:parameter name="context" value="{context}"/>
	                        <map:parameter name="site" value="{global:sitename}" />
	                        <map:parameter name="requesturi" value="{request:serverName}:{request:serverPort}{request:contextPath}"/>
	                        <map:parameter name="querystring" value="{request-attr:querystring}"/>
	                    </map:transform>
	                    
	                    <!-- map:transform type="tutil" src="/t/rssafter" / -->
	                    
	                    <map:transform type="wikitrans">
	                    	<map:parameter name="db" value="{global:db}" />
	                    </map:transform>
	                    <map:serialize type="xml"/>
	                </map:act>
	            </map:match>
	            
	            <map:match pattern="edit">
	                <map:act type="request">
	                	<map:parameter name="parameters" value="true"/>
	             		<map:generate src="empty.xml"/>

	
	                    <map:transform src="edit.xslt">
	                    	<map:parameter name="use-request-parameters" value="true"/>
	                    </map:transform>
	                    
	                    <map:transform type="cinclude" />
	                    <map:serialize type="xml"/>
	                </map:act>
	            </map:match>
	            
	            <map:match pattern="save">
					<map:generate type="internalSave"/>
					<map:transform src="save.xslt">
						<map:parameter name="use-request-parameters" value="true"/>
					</map:transform>
				
					<map:transform src="saving.xslt">
						<map:parameter name="use-request-parameters" value="true"/>
	                </map:transform>

					<map:serialize type="xml"/>
				</map:match>
				
				
		</map:pipeline>
		&generalComponentPipeline;
	</map:pipelines>
	
</map:sitemap>